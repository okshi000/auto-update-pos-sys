import{a as E,j as t,c as i,m as p}from"./index-DY0r9i56.js";import{r as s}from"./vendor-react-DsCSLZ3L.js";import{A as R}from"./Modal-CHr8xayP.js";function B({value:l,onChange:y,options:d,placeholder:j,disabled:n=!1,error:u,searchable:c=!1,clearable:k=!1,className:w="",renderOption:b}){const{t:x}=E(),[r,a]=s.useState(!1),[m,o]=s.useState(""),f=s.useRef(null),h=s.useRef(null),v=d.find(e=>e.value===l),g=c&&m?d.filter(e=>e.label.toLowerCase().includes(m.toLowerCase())):d;s.useEffect(()=>{const e=S=>{f.current&&!f.current.contains(S.target)&&(a(!1),o(""))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),s.useEffect(()=>{r&&c&&h.current&&h.current.focus()},[r,c]);const N=e=>{e.key==="Escape"?(a(!1),o("")):e.key==="Enter"&&!r&&a(!0)},L=e=>{e.disabled||(y(e.value),a(!1),o(""))},C=e=>{e.stopPropagation(),y(null),o("")};return t.jsxs("div",{ref:f,className:i("relative",w),children:[t.jsxs("button",{type:"button",onClick:()=>!n&&a(!r),onKeyDown:N,disabled:n,className:i("input w-full flex items-center justify-between gap-2 cursor-pointer touch-target text-start",u&&"input-error",n&&"opacity-50 cursor-not-allowed",r&&"ring-2 ring-blue-500 border-blue-500"),children:[t.jsx("span",{className:"truncate",style:{color:v?"var(--color-gray-900)":"var(--color-gray-400)"},children:v?.label||j||x("common.select","Select...")}),t.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[k&&l!==null&&!n&&t.jsx("span",{onClick:C,className:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors",style:{color:"var(--color-gray-400)"},children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsx(p.svg,{animate:{rotate:r?180:0},className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),t.jsx(R,{children:r&&t.jsxs(p.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.15},className:"absolute z-50 mt-1 w-full bg-white dark:bg-zinc-900 rounded-xl shadow-xl border overflow-hidden",style:{borderColor:"var(--color-border-subtle)"},children:[c&&t.jsx("div",{className:"p-2 border-b",style:{borderColor:"var(--color-border-subtle)"},children:t.jsx("input",{ref:h,type:"text",value:m,onChange:e=>o(e.target.value),placeholder:x("common.search","Search..."),className:"input h-10 text-sm"})}),t.jsx("div",{className:"max-h-60 overflow-y-auto",children:g.length===0?t.jsx("div",{className:"px-4 py-3 text-center text-sm",style:{color:"var(--color-gray-500)"},children:x("common.no_options","No options")}):g.map(e=>t.jsxs("button",{type:"button",onClick:()=>L(e),disabled:e.disabled,className:i("w-full px-4 py-3.5 text-start flex items-center justify-between transition-colors text-sm",e.disabled?"opacity-50 cursor-not-allowed":"hover:bg-gray-50 dark:hover:bg-zinc-800",e.value===l&&"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300"),children:[t.jsx("span",{className:i(e.value!==l&&"text-gray-900 dark:text-gray-100"),children:b?b(e):e.label}),e.value===l&&t.jsx(p.svg,{initial:{scale:0},animate:{scale:1},className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},e.value))})]})}),u&&t.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u})]})}export{B as S};
