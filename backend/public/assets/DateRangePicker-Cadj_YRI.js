import{a as L,j as e}from"./index-JnHVxLbD.js";import{r as m}from"./vendor-react-DsCSLZ3L.js";function E({value:r,onChange:o,placeholder:b,disabled:l=!1,error:i,maxDate:p,minDate:y,className:j=""}){const{t:n,locale:w,direction:g}=L(),[h,c]=m.useState(!1),u=m.useRef(null),d=t=>t?new Intl.DateTimeFormat(w,{year:"numeric",month:"short",day:"numeric"}).format(t):"",a=t=>t?t.toISOString().split("T")[0]:"",x=t=>{if(!t)return null;const s=new Date(t);return isNaN(s.getTime())?null:s},D=!r.start&&!r.end?b||n("common.select_dates","Select dates..."):r.start&&!r.end?`${d(r.start)} - ...`:!r.start&&r.end?`... - ${d(r.end)}`:`${d(r.start)} - ${d(r.end)}`;m.useEffect(()=>{const t=s=>{u.current&&!u.current.contains(s.target)&&c(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const N=t=>{const s=x(t.target.value);o({...r,start:s})},v=t=>{const s=x(t.target.value);o({...r,end:s})},k=()=>{o({start:null,end:null})},C=[{label:n("date.today","Today"),getValue:()=>{const t=new Date;return t.setHours(0,0,0,0),{start:t,end:t}}},{label:n("date.yesterday","Yesterday"),getValue:()=>{const t=new Date;return t.setDate(t.getDate()-1),t.setHours(0,0,0,0),{start:t,end:t}}},{label:n("date.last_7_days","Last 7 days"),getValue:()=>{const t=new Date;t.setHours(0,0,0,0);const s=new Date;return s.setDate(s.getDate()-6),s.setHours(0,0,0,0),{start:s,end:t}}},{label:n("date.last_30_days","Last 30 days"),getValue:()=>{const t=new Date;t.setHours(0,0,0,0);const s=new Date;return s.setDate(s.getDate()-29),s.setHours(0,0,0,0),{start:s,end:t}}},{label:n("date.this_month","This month"),getValue:()=>{const t=new Date,s=new Date(t.getFullYear(),t.getMonth(),1),f=new Date;return f.setHours(0,0,0,0),{start:s,end:f}}}];return e.jsxs("div",{ref:u,className:`relative ${j}`,children:[e.jsxs("button",{type:"button",onClick:()=>!l&&c(!h),disabled:l,className:`input w-full flex items-center gap-2 cursor-pointer ${i?"input-error":""} ${l?"opacity-50 cursor-not-allowed":""}`,style:{textAlign:g==="rtl"?"right":"left"},children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:"var(--color-gray-400)"},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"flex-1 truncate",style:{color:r.start||r.end?"var(--color-gray-900)":"var(--color-gray-400)"},children:D}),(r.start||r.end)&&!l&&e.jsx("span",{onClick:t=>{t.stopPropagation(),k()},className:"p-1 rounded hover:bg-gray-200",style:{color:"var(--color-gray-400)"},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h&&e.jsxs("div",{className:"absolute z-20 mt-1 bg-white rounded-lg shadow-lg border p-4",style:{borderColor:"var(--color-gray-200)",minWidth:"300px",[g==="rtl"?"right":"left"]:0},children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4 pb-4 border-b",style:{borderColor:"var(--color-gray-100)"},children:C.map(t=>e.jsx("button",{type:"button",onClick:()=>{o(t.getValue()),c(!1)},className:"px-3 py-1.5 text-sm rounded-lg border transition-colors hover:bg-gray-50",style:{borderColor:"var(--color-gray-200)",color:"var(--color-gray-700)"},children:t.label},t.label))}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-gray-700)"},children:n("date.start","Start")}),e.jsx("input",{type:"date",value:a(r.start),onChange:N,max:a(r.end||p||void 0),min:a(y||void 0),className:"input py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--color-gray-700)"},children:n("date.end","End")}),e.jsx("input",{type:"date",value:a(r.end),onChange:v,min:a(r.start||y||void 0),max:a(p||void 0),className:"input py-2"})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{type:"button",onClick:()=>c(!1),className:"btn btn-primary py-2",children:n("common.apply","Apply")})})]}),i&&e.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--color-error-600)"},children:i})]})}export{E as D};
