import{M as S,j as u,K as D,N as T,Q as A,R as I,T as K,U as W,a as U,m as M}from"./index-JnHVxLbD.js";import{r,b as B}from"./vendor-react-DsCSLZ3L.js";const V=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'].join(", ");function H(e={}){const{enabled:t=!0,initialFocus:s=!0,returnFocus:l=!0}=e,i=r.useRef(null),n=r.useRef(null),d=r.useCallback(()=>i.current?Array.from(i.current.querySelectorAll(V)).filter(o=>o.offsetParent!==null):[],[]),y=r.useCallback(()=>{const o=d();o.length>0&&o[0].focus()},[d]),x=r.useCallback(()=>{const o=d();o.length>0&&o[o.length-1].focus()},[d]),a=r.useCallback(o=>{if(!t||!i.current||o.key!=="Tab")return;const c=d();if(c.length===0){o.preventDefault();return}const f=c[0],m=c[c.length-1],h=document.activeElement;o.shiftKey?(h===f||!i.current.contains(h))&&(o.preventDefault(),m.focus()):(h===m||!i.current.contains(h))&&(o.preventDefault(),f.focus())},[t,d]);return r.useEffect(()=>{if(t&&(n.current=document.activeElement,s)){const o=setTimeout(()=>{y()},0);return()=>clearTimeout(o)}},[t,s,y]),r.useEffect(()=>{if(t)return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[t,a]),r.useEffect(()=>{if(!(!t||!l))return()=>{n.current&&n.current.focus&&n.current.focus()}},[t,l]),{containerRef:i,focusFirst:y,focusLast:x}}function P(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function _(...e){return t=>{let s=!1;const l=e.map(i=>{const n=P(i,t);return!s&&typeof n=="function"&&(s=!0),n});if(s)return()=>{for(let i=0;i<l.length;i++){const n=l[i];typeof n=="function"?n():P(e[i],null)}}}}function q(...e){return r.useCallback(_(...e),e)}class G extends r.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const l=s.offsetParent,i=D(l)&&l.offsetWidth||0,n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft,n.right=i-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Q({children:e,isPresent:t,anchorX:s,root:l}){const i=r.useId(),n=r.useRef(null),d=r.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=r.useContext(S),x=q(n,e?.ref);return r.useInsertionEffect(()=>{const{width:a,height:o,top:c,left:f,right:m}=d.current;if(t||!n.current||!a||!o)return;const h=s==="left"?`left: ${f}`:`right: ${m}`;n.current.dataset.motionPopId=i;const p=document.createElement("style");y&&(p.nonce=y);const v=l??document.head;return v.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            ${h}px !important;
            top: ${c}px !important;
          }
        `),()=>{v.contains(p)&&v.removeChild(p)}},[t]),u.jsx(G,{isPresent:t,childRef:n,sizeRef:d,children:r.cloneElement(e,{ref:x})})}const X=({children:e,initial:t,isPresent:s,onExitComplete:l,custom:i,presenceAffectsLayout:n,mode:d,anchorX:y,root:x})=>{const a=T(J),o=r.useId();let c=!0,f=r.useMemo(()=>(c=!1,{id:o,initial:t,isPresent:s,custom:i,onExitComplete:m=>{a.set(m,!0);for(const h of a.values())if(!h)return;l&&l()},register:m=>(a.set(m,!1),()=>a.delete(m))}),[s,a,l]);return n&&c&&(f={...f}),r.useMemo(()=>{a.forEach((m,h)=>a.set(h,!1))},[s]),r.useEffect(()=>{!s&&!a.size&&l&&l()},[s]),d==="popLayout"&&(e=u.jsx(Q,{isPresent:s,anchorX:y,root:x,children:e})),u.jsx(A.Provider,{value:f,children:e})};function J(){return new Map}const E=e=>e.key||"";function N(e){const t=[];return r.Children.forEach(e,s=>{r.isValidElement(s)&&t.push(s)}),t}const Y=({children:e,custom:t,initial:s=!0,onExitComplete:l,presenceAffectsLayout:i=!0,mode:n="sync",propagate:d=!1,anchorX:y="left",root:x})=>{const[a,o]=I(d),c=r.useMemo(()=>N(e),[e]),f=d&&!a?[]:c.map(E),m=r.useRef(!0),h=r.useRef(c),p=T(()=>new Map),[v,z]=r.useState(c),[C,R]=r.useState(c);K(()=>{m.current=!1,h.current=c;for(let g=0;g<C.length;g++){const b=E(C[g]);f.includes(b)?p.delete(b):p.get(b)!==!0&&p.set(b,!1)}},[C,f.length,f.join("-")]);const k=[];if(c!==v){let g=[...c];for(let b=0;b<C.length;b++){const w=C[b],j=E(w);f.includes(j)||(g.splice(b,0,w),k.push(w))}return n==="wait"&&k.length&&(g=k),R(N(g)),z(c),null}const{forceRender:$}=r.useContext(W);return u.jsx(u.Fragment,{children:C.map(g=>{const b=E(g),w=d&&!a?!1:c===C||f.includes(b),j=()=>{if(p.has(b))p.set(b,!0);else return;let L=!0;p.forEach(F=>{F||(L=!1)}),L&&($?.(),R(h.current),d&&o?.(),l&&l())};return u.jsx(X,{isPresent:w,initial:!m.current||s?void 0:!1,custom:t,presenceAffectsLayout:i,mode:n,root:x,onExitComplete:w?void 0:j,anchorX:y,children:g},b)})})},Z={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl",full:"max-w-full mx-4"};function te({isOpen:e,onClose:t,title:s,children:l,size:i="md",footer:n,closeOnOverlayClick:d=!0,closeOnEscape:y=!0,position:x="center"}){const{direction:a,t:o}=U(),{containerRef:c}=H({enabled:e,initialFocus:!0,returnFocus:!0}),f=r.useCallback(v=>{y&&v.key==="Escape"&&t()},[y,t]);r.useEffect(()=>(e&&(document.body.style.overflow="hidden",document.addEventListener("keydown",f)),()=>{document.body.style.overflow="",document.removeEventListener("keydown",f)}),[e,f]);const m=v=>{d&&v.target===v.currentTarget&&t()},h={hidden:{opacity:0},visible:{opacity:1}},p={hidden:x==="bottom"?{y:"100%",opacity:0}:{scale:.95,opacity:0},visible:x==="bottom"?{y:0,opacity:1}:{scale:1,opacity:1},exit:x==="bottom"?{y:"100%",opacity:0}:{scale:.95,opacity:0}};return B.createPortal(u.jsx(Y,{children:e&&u.jsxs("div",{className:`fixed inset-0 z-50 flex p-4 ${x==="bottom"?"items-end sm:items-center":"items-center"} justify-center`,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",dir:a,children:[u.jsx(M.div,{initial:"hidden",animate:"visible",exit:"hidden",variants:h,transition:{duration:.2},className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:m}),u.jsxs(M.div,{ref:c,initial:"hidden",animate:"visible",exit:"exit",variants:p,transition:{type:"spring",damping:25,stiffness:300},className:`
              relative bg-white dark:bg-zinc-900 rounded-xl shadow-2xl w-full flex flex-col
              ${Z[i]} 
              ${x==="bottom"?"max-h-[85vh] rounded-b-none sm:rounded-b-xl":"max-h-[90vh]"}
            `,onClick:v=>v.stopPropagation(),style:{borderColor:"var(--color-border-subtle)",borderWidth:"1px"},children:[x==="bottom"&&u.jsx("div",{className:"w-full flex justify-center pt-3 pb-1 sm:hidden",children:u.jsx("div",{className:"w-12 h-1.5 rounded-full bg-gray-300 dark:bg-zinc-700"})}),u.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",style:{borderColor:"var(--color-border-subtle)"},children:[u.jsx("h2",{id:"modal-title",className:"text-lg font-semibold text-start",style:{color:"var(--color-text-primary)"},children:s}),u.jsx("button",{onClick:t,className:"p-2 rounded-lg transition-colors touch-target hover:bg-gray-100 dark:hover:bg-zinc-800",style:{color:"var(--color-text-secondary)"},"aria-label":o("common.close","Close"),children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:l}),n&&u.jsx("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t",style:{borderColor:"var(--color-border-subtle)"},children:n})]})]})}),document.body)}export{Y as A,te as M};
